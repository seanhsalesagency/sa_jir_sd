<script>
  const LAMBDA_URL =
    "https://s4imtdlzhdq7cnnmor7bx4vcmm0banfo.lambda-url.us-east-1.on.aws/";

  async function loadForms() {
    const status = document.getElementById("statusIndicators");
    const main   = document.getElementById("mainContent");

    try {
      status.innerHTML = `üì° Fetching forms‚Ä¶`;
      const resp = await fetch(LAMBDA_URL);
      if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
      const data = await resp.json();

      // build summary
      status.innerHTML = `‚úÖ ${data.totalForms} forms loaded`;

      // optional: show project info / stats here‚Ä¶

      // render cards
      let html = `<div class="forms-container">`;
      data.forms.forEach((f) => {
        html += `
          <div class="form-card">
            <h3>${f.title}</h3>
            <p>${f.description}</p>
            <small>${f.fields.length} fields ‚Ä¢ ${f.issueTypeName}</small>
            <button onclick="openForm('${f.id}')">Create</button>
          </div>
        `;
      });
      html += `</div>`;
      main.innerHTML = html;
    } catch (e) {
      status.innerHTML = `‚ùå Error: ${e.message}`;
      main.innerHTML = `<p>${e.message}</p>`;
    }
  }

  function openForm(formId) {
    // you‚Äôll need to map formId‚Üístatic HTML form pages, or
    // build dynamic form UI here.
    window.location.href = `/forms/${formId}.html`;
  }

  document.addEventListener("DOMContentLoaded", loadForms);
</script>

